<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
    <style>
      /* style.css */

      html, body {
        height: 100%;
      }

      body {
        margin: 0;
        display: flex;

        /* This centers our sketch horizontally. */
        justify-content: center;

        /* This centers our sketch vertically. */
        align-items: center;
      }
    </style>
    <script>

let topcolor, bottomcolor;
let canvasWidth, canvasHeight;
let sqrCnv;

function setup() {
  canvasWidth = 1600;
  canvasHeight = 1000;
  createCanvas(canvasWidth, canvasHeight);
  rectMode(CENTER);
  noStroke();
  sqrCnv = 800;
  
  // rectMode(CENTER); 
  // noStroke();

  //TODO: center point follows the rules of 100 mile radius
    //center point
    // fill("#bb1a1a");
    // stroke('#bb1a1a');
    // strokeWeight(2);
    // circle(windowWidth/2, windowHeight/2, 20)
}

function draw() {
  background(255);

  //TODO: This will be set in editor.html manually
  // The start gradient point is at x=0, y=0
  // The end gradient point is at x=0, y=0
  let gradient = drawingContext.createLinearGradient(0, 500, 0, 260);
  
  gradient.addColorStop(0,color(148, 23, 81));
  gradient.addColorStop(1,color(86, 193, 255));

  drawingContext.fillStyle = gradient;
  rect(width/2, height/2, 800, 800);
  
  getData();
  async function getData() {
    const response = await fetch('/api');
    const data = await response.json();
    
    for (item of data){
      let color = `${item.color}`;
      let radius = `${item.radius}`;
      let lat = `${item.lat}`;
      let lon = `${item.lon}`;
      let pixelX = `${item.x}`;
      let pixelY = `${item.y}`;
      
      if(color){  
        noFill();
        stroke(color);
        strokeWeight(3);
        circle(sqrCnv/2, sqrCnv/2, radius);
        line(sqrCnv/2+10, sqrCnv/2-7, pixelX, pixelY);
      }
    }
  }

  noLoop();
}
    </script>
  </head>
  <body>
    <main>
    </main>
  </body>
</html>

<!-- //TODO: 
/*Gradient percentages
Line endpoints (ellipse and pointy fading endpoint)
Concentric circles opacity*/

//Desired: 
/*Line textures
Make arcs not circles*/
https://p5js.org/reference/#/p5/arc

//Post production:
/*Frame border 
Text
Date*/ -->