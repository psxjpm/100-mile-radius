<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
    <script>

//TODO: 
/*Gradient percentages
Line endpoints (ellipse and pointy fading endpoint)
Concentric circles opacity*/

//Desired: 
/*Line textures
Make arcs not circles*/

//Post production:
/*Frame border 
Text
Date*/


let topcolor, bottomcolor;

function setup() {
  //To resize canvas see https://p5js.org/reference/#/p5/resizeCanvas

  createCanvas(windowWidth, windowHeight);
  background(255,255,255);

  //TODO: This will be set in editor.html manually
  //Bottom color = Total tickets. Physical Audience (data from Eventbrite) 61 orders / 90 tickets 
  topcolor = color(86, 193, 255);
  bottomcolor = color(148, 23, 81);

  for (let y=0; y<height; y++){
    
    //n defines lerp (remap from ticket numbers and map inputs [])
    n = map(y,0,height, 0,1); 
    
    let newcolor = lerpColor(topcolor, bottomcolor, n);
    stroke(newcolor);
    line(0,y,width,y);
  }
    
    //center point
    // fill("#bb1a1a");
    // stroke('#bb1a1a');
    // strokeWeight(2);
    // circle(windowWidth/2, windowHeight/2, 20)
    
    //LINES
    //TODO: Lines could have an ellipse at their endpoints
    //x1, y1 = 38, 31; x2, y2 = 300, 20;
    // Use line() function to draw line

    // stroke('#FFFB00');
    // strokeWeight(2);
    // line(windowWidth/2+10, windowHeight/2-7, 785, 195);
    
    // fill("#bb1a1a");
    // stroke('#bb1a1a');
    // strokeWeight(2);
    // line(windowWidth/2-7, windowHeight/2-7, 185, 195);
  
}

function draw() {
  getData();
  async function getData() {
    const response = await fetch('/api');
    const data = await response.json();
    
    for (item of data){
      let color = `${item.color}`;
      let radius = `${item.radius}`
      
      if(radius){  
        noFill();
        stroke(color);
        strokeWeight(2);
        circle(windowWidth/2, windowHeight/2, radius);
      }
    }
  }
  // noLoop();
}
    </script>
  </head>
  <body>
    <main>
    </main>
  </body>
</html>